(this["webpackJsonpshare-bill-calc"]=this["webpackJsonpshare-bill-calc"]||[]).push([[0],{12:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(6),s=a.n(r),i=a(1),m=a(2),u=a(4),o=a(3);function c(e,t){void 0===t&&(t=0);var a=Math.pow(10,t);return e=parseFloat((e*a).toFixed(11)),Math.round(e)/a}var h=function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.onAddBill,n=e.onChangeBill,r=e.onChangeName,s=e.bills.map((function(e,t){return l.a.createElement("td",null,l.a.createElement("input",{type:"number",value:e,step:"0.1",min:"0",onChange:function(e){return n(t,e)}}))}));s.push(l.a.createElement("td",null,l.a.createElement("input",{type:"number",step:"0.1",min:"0",onChange:a})));var i=0;e.bills.forEach((function(e){return i+=parseFloat(e)}));var m=e.ncols,u=Array(m-(s.length-1)).fill(l.a.createElement("td",null));return l.a.createElement("tr",null,l.a.createElement("button",{onClick:e.onDel,disabled:e.disabled},"-"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",value:t,onChange:r})),s,u,l.a.createElement("td",null,i),l.a.createElement("td",null,e.pay),l.a.createElement("td",null,c(i-e.pay,2)))}}]),a}(l.a.Component);function b(e){var t=e.newMemberName;return l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("input",{type:"text",value:t,onChange:e.onChangeNewMemberName,onBlur:e.onAdd})))}function d(e){var t=e.ncols,a=e.sumBill,n=e.sumPay,r=c(a-n,2),s=Array(t+1).fill(l.a.createElement("th",null)),i=e.onChangeSumPay;return l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"\u6c47\u603b"),s,l.a.createElement("th",null,a),l.a.createElement("th",null,l.a.createElement("input",{type:"number",value:0==n?"":n,step:"0.1",min:"0",onChange:i})),l.a.createElement("th",null,r))}var v=function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={ncols:0,members:[{name:"\u81ea\u5df1",bills:[],pay:0}],newMemberName:"",sumBill:0,sumPay:0},n}return Object(m.a)(a,[{key:"onAddMember",value:function(e){var t=e.target.value;if(t){var a=this.state.members;a.push({name:t,bills:[]}),this.setState({members:a,newMemberName:""})}}},{key:"onDelMember",value:function(e){var t=this.state.members;t.splice(e,1),this.setState({members:t}),this.updateBill()}},{key:"onChangeNewMemberName",value:function(e){var t=e.target.value;this.setState({newMemberName:t})}},{key:"onChangeMemberName",value:function(e,t){var a=this.state.members;a[e].name=t.target.value,this.setState({members:a})}},{key:"updateBill",value:function(){var e=this.state.members,t=0;e.forEach((function(e){return e.bills.forEach((function(e){return t+=e}))}));for(var a=this.state.sumPay,n=c(t-a,2),l=0;l<e.length;++l){var r=e[l],s=0;r.bills.forEach((function(e){return s+=e}));var i=c(n*(s/t),2);r.pay=c(s-i,2)}this.setState({members:e,sumBill:t,sumDiscount:n})}},{key:"onAddMemberBill",value:function(e,t){var a=this.state.members,n=t.target.value,l=parseFloat(n);if(l>0){var r=a[e];r.bills.push(l);var s=this.state.ncols;s=Math.max(s,r.bills.length),this.setState({members:a,ncols:s}),this.updateBill()}}},{key:"onChangeMemberBill",value:function(e,t,a){var n=a.target.value,l=this.state.members,r=l[e];if(n){var s=parseFloat(n);r.bills[t]=s,this.setState({members:l})}else{r.bills.splice(t,1);var i=0;l.forEach((function(e){return i=Math.max(i,e.bills.length)})),this.setState({members:l,ncols:i})}this.updateBill()}},{key:"onChangeSumPay",value:function(e){var t=e.target.value,a=parseFloat(t);a>0?(this.state.sumPay=a,this.setState({sumPay:a})):(this.state.sumPay=0,this.setState({sumPay:0})),this.updateBill()}},{key:"render",value:function(){var e=this,t=this.state.members.length<=1,a=this.state.members.map((function(a,n){return l.a.createElement(h,{name:a.name,bills:a.bills,ncols:e.state.ncols,onChangeName:e.onChangeMemberName.bind(e,n),onDel:e.onDelMember.bind(e,n),onAddBill:e.onAddMemberBill.bind(e,n),onChangeBill:e.onChangeMemberBill.bind(e,n),disabled:t,pay:a.pay})}));return l.a.createElement("div",null,l.a.createElement("table",{border:"1"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"\u540d\u5b57"),Array(this.state.ncols+1).fill("\u4ef7\u683c").map((function(e,t){return l.a.createElement("th",null,e+(t+1))})),l.a.createElement("th",null,"\u8d26\u5355\u4ef7\u683c"),l.a.createElement("th",null,"\u652f\u4ed8\u4ef7\u683c"),l.a.createElement("th",null,"\u4f18\u60e0"))),l.a.createElement("tbody",null,a,l.a.createElement(b,{newMemberName:this.state.newMemberName,onChangeNewMemberName:this.onChangeNewMemberName.bind(this),onAdd:this.onAddMember.bind(this)}),l.a.createElement(d,{ncols:this.state.ncols,sumBill:this.state.sumBill,sumPay:this.state.sumPay,onChangeSumPay:this.onChangeSumPay.bind(this)}))))}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a(12)}},[[7,1,2]]]);
//# sourceMappingURL=main.ea9c7a7a.chunk.js.map